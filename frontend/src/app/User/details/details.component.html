<!-- details.component.html -->
<div class="container py-5">
    <!-- Loading Spinner -->
    <div *ngIf="isLoading" class="text-center py-5">
        <div class="spinner-border text-danger" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <!-- Error Alert -->
    <div *ngIf="error" class="alert alert-danger alert-dismissible fade show" role="alert">
        {{ error }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <!-- User Details Form -->
    <div *ngIf="user" class="row justify-content-center">
        <div class="col-12 col-lg-8">
            <div class="card shadow-sm">
                <div class="card-body p-4">
                    <div class="text-center mb-4">
                        <div class="avatar-placeholder mb-3">
                            <i class="bi bi-person-circle display-1 text-danger"></i>
                        </div>
                        <h2 class="card-title">Profile Details</h2>
                        <p class="text-muted">Update your personal information</p>
                    </div>

                    <form (ngSubmit)="updateUser()" #userForm="ngForm" class="needs-validation">
                        <!-- Account Information Section -->
                        <div class="mb-4">
                            <h5 class="border-bottom pb-2 text-dark">Account Information</h5>
                            <div class="row g-3">

                                <!-- Email -->
                                <div class="col-md-6">
                                    <div class="form-floating mb-3">
                                        <input type="email" class="form-control" id="email" 
                                            [(ngModel)]="user.email" name="email" disabled
                                            placeholder="Email">
                                        <label for="email">Email</label>
                                    </div>
                                </div>

                                <!-- Role -->
                                <div class="col-md-6">
                                    <div class="form-floating mb-3">
                                        <input type="text" class="form-control" id="role" 
                                            [value]="getRoleName(user.roleId)" disabled
                                            placeholder="Role">
                                        <label for="role">Role</label>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Personal Information Section -->
                        <div class="mb-4">
                            <h5 class="border-bottom pb-2 text-dark">Personal Information</h5>
                            <div class="row g-3">
                                <!-- Name -->
                                <div class="col-md-6">
                                    <div class="form-floating mb-3">
                                        <input type="text" class="form-control" id="name" 
                                            [(ngModel)]="user.name" name="name" required
                                            placeholder="Enter your name">
                                        <label for="name">First Name</label>
                                    </div>
                                </div>

                                <!-- Surname -->
                                <div class="col-md-6">
                                    <div class="form-floating mb-3">
                                        <input type="text" class="form-control" id="surname" 
                                            [(ngModel)]="user.surname" name="surname" required
                                            placeholder="Enter your surname">
                                        <label for="surname">Last Name</label>
                                    </div>
                                </div>

                                <!-- Phone Number -->
                                <div class="col-md-6">
                                    <div class="form-floating mb-3">
                                        <input type="tel" class="form-control" id="phoneNumber" 
                                            [(ngModel)]="user.phoneNumber" name="phoneNumber"
                                            placeholder="Enter your phone number">
                                        <label for="phoneNumber">Phone Number</label>
                                    </div>
                                </div>

                                <!-- Date of Birth -->
                                <div class="col-md-6">
                                    <div class="form-floating mb-3">
                                        <input type="date" class="form-control" id="dateOfBirth" 
                                            [(ngModel)]="user.dateOfBirth" name="dateOfBirth"
                                            placeholder="Select your birth date">
                                        <label for="dateOfBirth">Date of Birth</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- System Information Section -->
                        <div class="mb-4">
                            <h5 class="border-bottom pb-2 text-dark">System Information</h5>
                            <div class="row g-3">
                                <!-- Created At -->
                                <div class="col-md-12">
                                    <div class="form-floating mb-3">
                                        <input type="text" class="form-control" id="createdAt" 
                                            [value]="user.createdAt | date:'medium'" disabled
                                            placeholder="Created At">
                                        <label for="createdAt">Created At</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                            <button class="btn btn-outline-secondary me-2" (click)="deleteUser()">Delete Profile</button>
                            <button type="button" class="btn btn-outline-secondary me-md-2" routerLink="/profile">
                                <i class="bi bi-x-circle me-2"></i>Cancel
                            </button>
                            <button type="submit" class="btn btn-danger" [disabled]="!userForm.form.valid || isLoading">
                                <i class="bi bi-check-circle me-2"></i>Save Changes
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
